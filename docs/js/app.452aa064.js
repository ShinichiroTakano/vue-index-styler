(function(e){function t(t){for(var r,i,a=t[0],l=t[1],o=t[2],c=0,h=[];c<a.length;c++)i=a[c],Object.prototype.hasOwnProperty.call(d,i)&&d[i]&&h.push(d[i][0]),d[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var l=n[a];0!==d[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},d={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var o=0;o<a.length;o++)t(a[o]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),d=n.n(r);d.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"styled-text-area"}},[n("div",{attrs:{id:"title-str"}},[e._v("Index Styled Text")]),n("IndexStyler",{attrs:{indexObjects:e.indexObjects,rawText:e.TestText,defaultStyle:e.defaultStyle,defaultHtmlAttributes:e.defaultStyle,isFirstChar0:e.isFirstChar0,isSlicedInvolvingEndIndex:e.isSlicedInvolvingEndIndex,isIndexObjectsWatched:e.isIndexObjectsWatched,textContainerId:e.textContainerId}})],1),n("div",{staticClass:"json-area"},[n("div",{staticClass:"current-index-objects-area"},[n("div",{attrs:{id:"title-str"}},[e._v("indexObjects Prop Example")]),e._v("\n      indexObjects: ["),e._l(e.indexObjects,(function(t,r){return n("span",{key:r},[e._v("\n          {\n              startIndex: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.startIndex,expression:"indexObject.startIndex",modifiers:{number:!0}}],staticClass:"index-input",attrs:{type:"number"},domProps:{value:t.startIndex},on:{input:function(n){n.target.composing||e.$set(t,"startIndex",e._n(n.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(",\n              endIndex: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.endIndex,expression:"indexObject.endIndex",modifiers:{number:!0}}],staticClass:"index-input",attrs:{type:"number"},domProps:{value:t.endIndex},on:{input:function(n){n.target.composing||e.$set(t,"endIndex",e._n(n.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(",\n              style: {\n                "),t.style?e._l(Object.keys(t.style),(function(d,s){return n("span",{key:s,staticClass:"style-row"},[e._v(e._s(d)+": "),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.style[d],expression:"indexObject.style[property]",modifiers:{lazy:!0}}],staticClass:"style-input",domProps:{value:t.style[d]},on:{change:function(n){return e.$set(t.style,d,n.target.value)}}}),e._v(", "),n("button",{on:{click:function(t){return e.deleteStyle(d,r)}}},[e._v("Delete")]),n("br"),e._v("                ")])})):e._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:e.addedStyles[r].property,expression:"addedStyles[i].property"}],staticClass:"style-input",domProps:{value:e.addedStyles[r].property},on:{input:function(t){t.target.composing||e.$set(e.addedStyles[r],"property",t.target.value)}}}),e._v(": "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.addedStyles[r].value,expression:"addedStyles[i].value"}],staticClass:"style-input",domProps:{value:e.addedStyles[r].value},on:{input:function(t){t.target.composing||e.$set(e.addedStyles[r],"value",t.target.value)}}}),n("button",{staticClass:"style-add-btn",on:{click:function(t){return e.addStyle(r)}}},[e._v("Add")]),e._v("\n              }\n          }"),r!==e.indexObjects.length-1?n("span",[e._v(",")]):e._e(),n("button",{on:{click:function(t){return e.removeIndexObject(r)}}},[e._v("Remove")])],2)})),e._v("\n      ]\n      "),n("div",{staticClass:"added-index-object-area"},[n("div",{attrs:{id:"title-str"}},[e._v(" Added indexObject Prop ")]),e._v("\n        {\n            startIndex: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.pushedIndexObject.startIndex,expression:"pushedIndexObject.startIndex",modifiers:{number:!0}}],staticClass:"index-input",attrs:{type:"number"},domProps:{value:e.pushedIndexObject.startIndex},on:{input:function(t){t.target.composing||e.$set(e.pushedIndexObject,"startIndex",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(",\n            endIndex: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.pushedIndexObject.endIndex,expression:"pushedIndexObject.endIndex",modifiers:{number:!0}}],staticClass:"index-input",attrs:{type:"number"},domProps:{value:e.pushedIndexObject.endIndex},on:{input:function(t){t.target.composing||e.$set(e.pushedIndexObject,"endIndex",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(",\n            style: {\n                "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pushedStyleProperty,expression:"pushedStyleProperty"}],staticClass:"style-input",domProps:{value:e.pushedStyleProperty},on:{input:function(t){t.target.composing||(e.pushedStyleProperty=t.target.value)}}}),e._v(": "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pushedStyleValue,expression:"pushedStyleValue"}],staticClass:"style-input",domProps:{value:e.pushedStyleValue},on:{input:function(t){t.target.composing||(e.pushedStyleValue=t.target.value)}}}),e._v("\n            }\n        }\n        "),n("button",{attrs:{disabled:e.isPushDisabled},on:{click:e.changeIndexObjects}},[e._v("Push")])])],2),n("div",{staticClass:"other-props-area"},[n("div",{attrs:{id:"title-str"}},[e._v(" Other Props Example")]),n("p",[e._v("defaultStyle: "+e._s(e.defaultStyle)+",")]),n("p",[e._v("defaultHtmlAttributes: "+e._s(e.defaultStyle)+",")]),n("p",[e._v("isFirstChar0: "+e._s(e.isFirstChar0)+",")]),n("p",[e._v("isSlicedInvolvingEndIndex: "+e._s(e.isSlicedInvolvingEndIndex)+",")]),n("p",[e._v("isIndexObjectsWatched: "+e._s(e.isIndexObjectsWatched)+",")]),n("p",[e._v("textContainerId: '"+e._s(e.textContainerId)+"'")])])])])},s=[],i=n("bd86"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.textContainerId}})},l=[],o=(n("8e6e"),n("456d"),n("ffc1"),n("768b"));n("55dd"),n("ac4d"),n("8a81"),n("ac6a");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"index-style-text",props:{indexObjects:{type:Array,required:!0},rawText:{type:String,required:!0},textContainerId:{type:String,default:"styled-text-container"},defaultStyle:{type:Object},defaultHtmlAttributes:{type:Object},isFirstChar0:{type:Boolean,default:!0},isSlicedInvolvingEndIndex:{type:Boolean,default:!0},isIndexObjectsWatched:{type:Boolean,default:!1}},created:function(){this.checkIsIndexObjectsWatched()},mounted:function(){this.styleText()},methods:{checkIsIndexObjectsWatched:function(){this.isIndexObjectsWatched&&this.$watch("indexObjects",this.styleText,{deep:!0})},styleText:function(){if(0!==this.indexObjects.length){var e;this.checkIndexes(),e=this.isIndexObjectsWatched?JSON.parse(JSON.stringify(this.indexObjects)):this.indexObjects,this.convertIndexToDefault(e);var t=this.createIndexObjectsTree(e);this.sortIntoChildren(t);var n=this.createStyledFragments(t),r=document.getElementById(this.textContainerId);while(r.firstChild)r.removeChild(r.firstChild);r.appendChild(n)}else this.displayRawText()},displayRawText:function(){var e=document.getElementById(this.textContainerId);while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(this.rawText))},isNumber:function(e){return"number"===typeof e&&isFinite(e)},checkIndexes:function(){var e=this.rawText.length,t=!0,n=!1,r=void 0;try{for(var d,s=this.indexObjects[Symbol.iterator]();!(t=(d=s.next()).done);t=!0){var i=d.value,a=i.startIndex,l=i.endIndex;if(!this.isNumber(a))throw new Error('"startIndex must be number.');if(!this.isNumber(l))throw new Error('"endIndex must be number.');if(this.isSlicedInvolvingEndIndex){if(a>l)throw new Error('"startIndex <= endIndex" must be required.')}else if(a>=l)throw new Error('"startIndex < endIndex" must be required.');if(this.isFirstChar0){if(a<0||l<0)throw new Error('"0 <= startIndex && 0 <= endIndex" must be required.');if(this.isSlicedInvolvingEndIndex){if(a>=e||l>=e)throw new Error('"startIndex < text.length && endIndex < text.length" must be required.')}else if(a>=e+1||l>=e+1)throw new Error('"startIndex < text.length + 1 && endIndex < text.length + 1" must be required.')}else{if(a<1||l<1)throw new Error('"1 <= startIndex && 1 <= endIndex" must be required.');if(this.isSlicedInvolvingEndIndex){if(a>e||l>e)throw new Error('"startIndex =< text.length && endIndex =< text.length" must be required.')}else if(a>e+1||l>e+1)throw new Error('"startIndex =< text.length +1 &&  endIndex =< text.length + 1" must be required.')}}}catch(o){n=!0,r=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}},convertIndexToDefault:function(e){if(!this.isFirstChar0||!this.isSlicedInvolvingEndIndex){if(!this.isFirstChar0){var t=!0,n=!1,r=void 0;try{for(var d,s=e[Symbol.iterator]();!(t=(d=s.next()).done);t=!0){var i=d.value,a=i.startIndex,l=i.endIndex;i.startIndex=a-1,i.endIndex=l-1}}catch(f){n=!0,r=f}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}if(!this.isSlicedInvolvingEndIndex){var o=!0,u=!1,c=void 0;try{for(var h,x=e[Symbol.iterator]();!(o=(h=x.next()).done);o=!0){var p=h.value;l=p.endIndex;p.endIndex=l-1}}catch(f){u=!0,c=f}finally{try{o||null==x.return||x.return()}finally{if(u)throw c}}}}},sortByStartIndex:function(e){e.sort((function(e,t){return e.startIndex>t.startIndex?1:e.startIndex<t.startIndex?-1:0}))},sortIntoChildren:function(e){this.sortByStartIndex(e);var t=!0,n=!1,r=void 0;try{for(var d,s=e[Symbol.iterator]();!(t=(d=s.next()).done);t=!0){var i=d.value;i.children&&this.sortIntoChildren(i.children)}}catch(a){n=!0,r=a}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}},sortByIndexDiff:function(e){e.sort((function(e,t){var n=e.endIndex-e.startIndex,r=t.endIndex-t.startIndex;return n<r?1:n>r?-1:0}))},createIndexObjectsTree:function(e){this.sortByIndexDiff(e);for(var t=e.length,n=t-1;n>=0;n--)for(var r=e[n],d=r.startIndex,s=r.endIndex,i=r.style,a=r.children,l=r.htmlAttributes,o=n-1;o>=0;o--){var u=e[o],c=u.startIndex,h=u.endIndex,x=u.style,p=u.htmlAttributes,f=u.children,v=void 0;if(!(s<c||h<d)){d<c&&c<=s?(u.startIndex=d,u.style=i,u.htmlAttributes=l,v={startIndex:c,endIndex:s,style:x,htmlAttributes:p}):c<=d&&s<=h?v={startIndex:d,endIndex:s,style:i,htmlAttributes:l}:d<=h&&h<s&&(u.endIndex=s,v={startIndex:d,endIndex:h,style:i,htmlAttributes:l}),e.splice(n,1),this.sortByIndexDiff(e);var y=void 0;y=a&&f?a.concat(f):a||f?a||f:[],y.push(v),u.children=this.createIndexObjectsTree(y);break}}return e},makeTextNode:function(e,t){var n=this.rawText.slice(e,t),r=document.createTextNode(n);return r},getBeforeEndIndex:function(e,t,n){return 0===e?n:t[e-1].endIndex+1},getNextStartIndex:function(e,t,n){return t[e+1]?t[e+1].startIndex:n},getNeighborIndexes:function(e,t,n,r){return[this.getBeforeEndIndex(e,t,n),this.getNextStartIndex(e,t,r)]},createStyledFragment:function(e,t,n,r){var d=e.startIndex,s=e.endIndex,i=e.style,a=e.htmlAttributes,l=this.makeTextNode(t,d),u=document.createElement("span");if(e.children){for(var h=e.children.length,x=document.createDocumentFragment(),p=0;p<h;p++){var f=e.children[p],v=this.getNeighborIndexes(p,e.children,e.startIndex,e.endIndex),y=Object(o["a"])(v,2),b=y[0],I=y[1],m=p===h-1,g=this.createStyledFragment(f,b,I,m);x.appendChild(g)}u.appendChild(x)}else{var O=this.makeTextNode(d,s+1);u.appendChild(O)}var j,S=i instanceof Object&&!(i instanceof Array),w=this.defaultStyle instanceof Object&&!(this.defaultStyle instanceof Array);if(S&&w?j=c({},this.defaultStyle,{},i):(S||w)&&(j=i||this.defaultStyle),j)for(var _=0,C=Object.entries(j);_<C.length;_++){var P=Object(o["a"])(C[_],2),E=P[0],T=P[1];u.style[E]=T}var A,k=a instanceof Object&&!(a instanceof Array),N=this.defaultHtmlAttributes instanceof Object&&!(this.defaultHtmlAttributes instanceof Array);if(k&&N?A=c({},this.defaultHtmlAttributes,{},a):(k||N)&&(A=a||this.defaultHtmlAttributes),A)for(var F=0,$=Object.entries(A);F<$.length;F++){var D=Object(o["a"])($[F],2),B=D[0];T=D[1];u.setAttribute(B,T)}var M=document.createDocumentFragment();if(M.appendChild(l),M.appendChild(u),r){var q=this.makeTextNode(s+1,n+1);M.appendChild(q)}return M},createStyledFragments:function(e){for(var t=e.length,n=document.createDocumentFragment(),r=0;r<t;r++){var d=e[r],s=this.getNeighborIndexes(r,e,0,this.rawText.length-1),i=Object(o["a"])(s,2),a=i[0],l=i[1],u=r===t-1,c=this.createStyledFragment(d,a,l,u);n.appendChild(c)}return n}}},x=h,p=n("2877"),f=Object(p["a"])(x,a,l,!1,null,null,null),v=f.exports,y='君を忘れない 曲がりくねった道を行く\n産まれたての太陽と 夢を渡る黄色い砂\n二度と戻れない くすぐり合って転げた日\nきっと 想像した以上に 騒がしい未来が僕を待ってる\n\n"愛してる"の響きだけで 強くなれる気がしたよ\nささやかな喜びを つぶれるほど抱きしめて\n\nこぼれそうな思い 汚れた手で書き上げた\nあの手紙はすぐにでも 捨てて欲しいと言ったのに\n少しだけ眠い 冷たい水でこじあけて\n今 せかされるように 飛ばされるように 通り過ぎてく\n\n"愛してる"の響きだけで 強くなれる気がしたよ\nいつかまた この場所で 君とめぐり会いたい\n\nどんなに歩いても たどりつけない 心の雪でぬれた頬\n悪魔のふりして 切り裂いた歌を 春の風に舞う花びらに変えて\n\n君を忘れない 曲がりくねった道を行く\nきっと 想像した以上に 騒がしい未来が僕を待ってる\n\n"愛してる"の響きだけで 強くなれる気がしたよ\nささやかな喜びをつぶれるほど抱きしめて\nズルしても真面目にも生きてゆける気がしたよ\nいつかまた この場所で 君とめぐり会いたい',b=y,I=[{startIndex:1,endIndex:1,style:{backgroundColor:"blue"},htmlAttributes:{id:1}},{startIndex:21,endIndex:36,style:{color:"skyblue"},htmlAttributes:{id:2,class:"test-class"}},{startIndex:221,endIndex:240,style:{color:"blue",fontSize:"29px"},htmlAttributes:{id:3,class:"test-class"}},{startIndex:324,endIndex:388,style:{color:"gold"},htmlAttributes:{id:3,class:"test-class"}}],m=I,g={name:"app",components:{IndexStyler:v},data:function(){return{indexObjects:[],pushedIndexObject:{startIndex:null,endIndex:null,style:null},pushedStyleProperty:null,pushedStyleValue:null,addedStyles:[],defaultStyle:{color:"pink"},defaultHtmlAttributes:{class:"index-styled-text"},isFirstChar0:!0,isSlicedInvolvingEndIndex:!0,isIndexObjectsWatched:!0,textContainerId:"text-container-custom-id"}},created:function(){this.indexObjects=m;for(var e=0;e<this.indexObjects.length;e++)this.addedStyles.push({property:null,value:null})},computed:{TestText:function(){return b},isPushDisabled:function(){return null===this.pushedIndexObject.startIndex||null===this.pushedIndexObject.endIndex}},methods:{createTestIndexObjects:function(){for(var e=[],t=0;t<2;t++){var n=Math.floor(Math.random()*b.length),r=Math.floor(Math.random()*b.length);if(n>r){var d=[r,n];n=d[0],r=d[1]}var s=["red","yellow","brown","blue","skyblue","orange","purple","gold","silver","green"][Math.floor(10*Math.random())],i=["red","yellow","brown","blue","skyblue","orange","purple","gold","silver","green"][Math.floor(10*Math.random())],a={};a.startIndex=n,a.endIndex=r,a.style={color:s,backgroundColor:i,borderRadius:"5px"},a.htmlAttributes={id:t},e.push(a)}return e},changeIndexObjects:function(){this.pushedStyleProperty&&this.pushedStyleValue?this.pushedIndexObject.style=Object(i["a"])({},this.pushedStyleProperty,this.pushedStyleValue):this.pushedIndexObject.style=null,this.indexObjects.push(this.pushedIndexObject),this.pushedIndexObject={startIndex:null,endIndex:null,style:null},this.pushedStyleProperty=null,this.pushedStyleValue=null,this.addedStyles.push({property:null,value:null})},addStyle:function(e){this.$set(this.indexObjects[e].style,this.addedStyles[e].property,this.addedStyles[e].value),this.addedStyles[e].property=null,this.addedStyles[e].value=null},deleteStyle:function(e,t){this.$delete(this.indexObjects[t].style,e)},removeIndexObject:function(e){this.indexObjects.splice(e,1)}}},O=g,j=(n("034f"),Object(p["a"])(O,d,s,!1,null,null,null)),S=j.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(S)}}).$mount("#app")},"64a9":function(e,t,n){}});
//# sourceMappingURL=app.452aa064.js.map